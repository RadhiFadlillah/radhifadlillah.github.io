<!doctype html><html lang=en><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel=apple-touch-icon-precomposed sizes=144x144 href=/themes/geos2/res/apple-touch-icon-144x144.png><link rel=apple-touch-icon-precomposed sizes=152x152 href=/themes/geos2/res/apple-touch-icon-152x152.png><link rel=icon type=image/png href=/themes/geos2/res/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/themes/geos2/res/favicon-16x16.png sizes=16x16><script data-goatcounter=https://radhifadlillah.goatcounter.com/count async src=//gc.zgo.at/count.js></script><link href=/themes/geos2/css/fonts.css rel=stylesheet><link href=/themes/geos2/css/index.css rel=stylesheet><title>Profiling Go Apps - Radhi Fadlillah</title><div class=file-page><div class="window reader"><div class=window__header><p class=window__header__title>Profiling Go Apps (14/10/18)</div><div class="window__status-bar url-trail file-page__url-trail"><a href=/ class=url-trail__item>&lt;root></a>
<a href=/blog class=url-trail__item>blog</a>
<a href=/blog/2018-10-14-profiling-go-apps class=url-trail__item>&lt;current-file></a></div><div class="window__content reader__content"><p>There are several ways for profiling a Go application, but the easiest one that I've found is by using <code>github.com/pkg/profile</code>.<p>To use it, first install it by running :<pre class=chroma>go get github.com/pkg/profile
</pre><p>Once installed, enable the profiler by starting it in the main function of your app :<pre class=chroma><span class=kn>package</span> <span class=nx>main</span>

<span class=kn>import</span> <span class=s>&#34;github.com/pkg/profile&#34;</span>

<span class=kd>func</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
    <span class=c1>// Use this line for profiling CPU
</span><span class=c1></span>    <span class=k>defer</span> <span class=nx>profile</span><span class=p>.</span><span class=nf>Start</span><span class=p>().</span><span class=nf>Stop</span><span class=p>()</span>
    
    <span class=c1>// Use this line for profiling memory
</span><span class=c1></span>    <span class=k>defer</span> <span class=nx>profile</span><span class=p>.</span><span class=nf>Start</span><span class=p>(</span><span class=nx>profile</span><span class=p>.</span><span class=nx>MemProfile</span><span class=p>).</span><span class=nf>Stop</span><span class=p>()</span>
<span class=p>}</span>
</pre><p>Next, build and run your app like usual. Once finished, the app will generate a <code>pprof</code> file in a temporary folder, and it will tell you where it's located, for example :<pre class=chroma>2018/10/1414:26:28 profile: cpu profiling enabled, /var/...../cpu.pprof
</pre><p>If you use memory profiler, the output will be <code>mem.pprof</code> instead of <code>cpu.pprof</code>.<p>To analyze the <code>pprof</code> file, we can convert it to PDF file by using standard Go tool :<pre class=chroma>go tool pprof --pdf ~/go/bin/yourbinary /path/to/cpu.pprof &gt; file.pdf
</pre><div class=reader__tags><p>Tags:</p><a href=/blog/tag-golang>#golang</a></div><div class=reader__sibling><a href=/blog/2018-10-08-limiting-number-of-goroutine class=reader__sibling__prev>Limiting Number of Goroutine</a>
<a href=/blog/2019-02-08-qamel-desktop-app-using-go-qml class=reader__sibling__next>Qamel - Build Desktop Application Using Go and QML</a></div></div><div class=window__footer></div></div></div>